<!DOCTYPE html>
<html>
<head>
<style>

  @font-face {
    font-family: font_1;
    src: url(fonts/font_1.ttf);
  }
  @font-face {
    font-family: font_2;
    src: url(fonts/font_2.ttf);
  }
  @font-face {
    font-family: font_3;
    src: url(fonts/font_3.ttf);
  }

  .center {
    display: block;
    position: fixed;
    width: 100%;
    height: 100%;
    opacity: 0;
    filter: alpha(opacity=40);
  }
  .frame {
    display: block;
    position: fixed;
    width: 60%;
    aspect-ratio: 29/18;
    height: auto;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
  .names {
    display: block;
    position: fixed;
    width: 500px;
    right: 20%;
    top: 40%;
    transform: translate(100%, -50%);
    opacity: 0;
  }
  .links {
    display: none;
    position: fixed;
    width: 70%;
    left: 25%;
    top: 40%;
    transform: translate(0, -50%);
  }
  .floors {
    display: block;
    position: fixed;
    width: 400px;
    height: 30px;
    left: 18px;
    top: 0px;
    transform: translate(0, -70px);
    opacity: 0;
  }
  .name_text {
    font-size: 16px;
    color: #a6b8c2;
    letter-spacing: -0.5px;
    font-family: font_2, sans-serif;
    word-spacing: 2x;
    line-height: 2.4;
  }
  .link_text {
    font-size: 24px;
    letter-spacing: -1px;
    word-spacing: 3px;
    color: #a6b8c2;
    font-family: font_3, serif;
    line-height: 3;
    text-decoration-thickness: 1px;
  }
  .link_text:hover {
    font-family: font_2, sans-serif;
  }
  .button {
    opacity: 0.6;
    width: 100%;
    height: 100%;
  }
  .button:hover {
    opacity: 1.0;
  }

</style>
</head>

<body onload="loadpage()" style="background-color:#f5f3f0";>

<div class="frame" id="frame">
  <div class="floors" id="basement_text">
    <p class="name_text">Basement</p>
  </div>
  <div class="floors" id="groundfloor_text">
    <p class="name_text">Ground Floor</p>
  </div>
  <div class="floors" id="firstfloor_text">
    <p class="name_text">First Floor</p>
  </div>
  <div class="floors" id="secondfloor_text">
    <p class="name_text">Second Floor</p>
  </div>
  <img src="images/caves.png" class="center" id="caves">
  <img src="images/workshop.png" class="center" id="workshop">
  <img src="images/loos.png" class="center" id="loos">
  <img src="images/basement.png" class="center" id="basement">

  <img src="images/library.png" class="center" id="library">
  <img src="images/entrance.png" class="center" id="entrance">
  <img src="images/groundfloor.png" class="center" id="groundfloor">

  <img src="images/hallway.png" class="center" id="hallway">
  <img src="images/oms.png" class="center" id="oms">
  <img src="images/drawingstudio.png" class="center" id="drawingstudio">
  <img src="images/firstfloor.png" class="center" id="firstfloor">

  <img src="images/mezzanine.png" class="center" id="mezzanine">
  <img src="images/secondfloor.png" class="center" id="secondfloor">
</div>

<div id="names">
  <div class="names" id="caves_names">
    <p class="name_text">Liz Davies<br>Chris Roscoe<br>Filip Soko&#322;owski<br>Ellie Thompson</p>
  </div>
  <div class="names" id="workshop_names">
    <p class="name_text">Lue Campbell-Smith<br>Ashley Cluer</p>
  </div>
  <div class="names" id="loos_names">
    <p class="name_text">Jenny Gill<br>Lisa He<br>Michelle Mendieta Mean</p>
  </div>
  <div class="names" id="library_names">
    <p class="name_text">Emma Hawkins<br>Rowan Ireland<br>Tejasbna Sehdev<br>Harrison Taylor</p>
  </div>
  <div class="names" id="entrance_names">
    <p class="name_text">April Dublin-Beeton<br>Iszi Kelly<br>Jessamy Money-Kyrle<br>Grace Ovenden</p>
  </div>
  <div class="names" id="hallway_names">
    <p class="name_text">Lydia Moraitis<br>Eliza Owen</p>
  </div>
  <div class="names" id="oms_names">
    <p class="name_text">Yang Gao<br>Ananda Kupfer<br>Emily Webb</p>
  </div>
  <div class="names" id="drawingstudio_names">
    <p class="name_text">Megan Beckinsale<br>Sophia Hambleton-Grey</p>
  </div>
  <div class="names" id="mezzanine_names">
    <p class="name_text">Hannah Barton<br>Alice Hackney</p>
  </div>
</div>

<div class="links" id="caves_links">
  <a href="liz/page.html" class="link_text">Liz Davies<br></a>
  <a href="chris/page.html" class="link_text">Chris Roscoe<br></a>
  <a href="filip/page.html" class="link_text">Filip Soko&#322;owski<br></a>
  <a href="ellie/page.html" class="link_text">Ellie Thompson<br></a>
</div>
<div class="links" id="workshop_links">
  <a href="lue/page.html" class="link_text">Lue Campbell-Smith<br></a>
  <a href="ashley/page.html" class="link_text">Ashley Cluer<br></a>
</div>
<div class="links" id="loos_links">
  <a href="jenny/page.html" class="link_text">Jenny Gill<br></a>
  <a href="lisa/page.html" class="link_text">Lisa He<br></a>
  <a href="michelle/page.html" class="link_text">Michelle Mendieta Mean<br></a>
</div>
<div class="links" id="library_links">
  <a href="emma/page.html" class="link_text">Emma Hawkins<br></a>
  <a href="rowan/page.html" class="link_text">Rowan Ireland<br></a>
  <a href="tejasbna/page.html" class="link_text">Tejasbna Sehdev<br></a>
  <a href="harrison/page.html" class="link_text">Harrison Taylor<br></a>
</div>
<div class="links" id="entrance_links">
  <a href="april/page.html" class="link_text">April Dublin-Beeton<br></a>
  <a href="iszi/page.html" class="link_text">Iszi Kelly<br></a>
  <a href="jessamy/page.html" class="link_text">Jessamy Money-Kyrle<br></a>
  <a href="grace/page.html" class="link_text">Grace Ovenden<br></a>
</div>
<div class="links" id="hallway_links">
  <a href="lydia/page.html" class="link_text">Lydia Moraitis<br></a>
  <a href="eliza/page.html" class="link_text">Eliza Owen<br></a>
</div>
<div class="links" id="oms_links">
  <a href="yang/page.html" class="link_text">Yang Gao<br></a>
  <a href="ananda/page.html" class="link_text">Ananda Kupfer<br></a>
  <a href="emily/page.html" class="link_text">Emily Webb<br></a>
</div>
<div class="links" id="drawingstudio_links">
  <a href="megan/page.html" class="link_text">Megan Beckinsale<br></a>
  <a href="sophia/page.html" class="link_text">Sophia Hambleton-Grey<br></a>
</div>
<div class="links" id="mezzanine_links">
  <a href="hannah/page.html" class="link_text">Hannah Barton<br></a>
  <a href="alice/page.html" class="link_text">Alice Hackney<br></a>
</div>

<div id="back" onclick="back()" style="position: fixed; width: 64px; height: 64px; display: none; top: 50px; left: 50px; cursor: pointer; z-index: 2;">
  <img src="images/back.png" class="button">
</div>
<div id="logo" onclick="" style="position: fixed; width: 36px; height: 36px; display: none; right: 40px; top: 50px; cursor: pointer; z-index: 2;">
  <img src="images/logo.png" style="width: 100%; height: 100%;">
</div>

<div id="upstairs" onclick="upstairs()" style="position: fixed; aspect-ratio: 1; width: 10%; height: auto; display: none; top: 40%; right: 5%; transform: translate(0, -50%); opacity: 0; cursor: pointer; z-index: 2;">
  <img src="images/upstairs.png" class="button">
  <p class="name_text" style="position:fixed; left: 40px; bottom: -25px;">upstairs</p>
</div>
<div id="downstairs" onclick="downstairs()" style="position: fixed; aspect-ratio: 1; width: 10%; height: auto; display: none; top: 40%; left: 5%; transform: translate(0, -50%); opacity: 0; cursor: pointer; z-index: 2;">
  <img src="images/downstairs.png" class="button">
  <p class="name_text" style="position:fixed; left: 40px; bottom: -25px;">downstairs</p>
</div>

<script>
var caves = false;
var workshop = false;
var loos = false;

var library = false;
var entrance = false;

var hallway = false;
var oms = false;
var drawingstudio = false;

var mezzanine = false;

var url = new URL(window.location);
var floor = url.searchParams.get("floor") ? parseInt(url.searchParams.get("floor")) : 0;
var attop = false;
var atbottom = false;

function upstairs() {
  if (floor < 2) {
    clearpage();
    if (floor == -1) {
      document.getElementById("downstairs").style.display = "block";
      fadein(document.getElementById("downstairs"));
    }
    floor++;
    (url.searchParams.has('floor') ? url.searchParams.set('floor', floor) : url.searchParams.append('floor', floor));
    url.search = url.searchParams;
    history.pushState({}, null, url.toString());
    if (floor == 2) {
      setTimeout(() => { document.getElementById("upstairs").style.display = "none"; }, 500);
      fadeout(document.getElementById("upstairs"));
    }
    fadepagein();
  }
}

function downstairs() {
  if (floor > -1) {
    clearpage();
    if (floor == 2) {
      document.getElementById("upstairs").style.display = "block";
      fadein(document.getElementById("upstairs"));
    }
    floor--;
    (url.searchParams.has('floor') ? url.searchParams.set('floor', floor) : url.searchParams.append('floor', floor));
    url.search = url.searchParams;
    history.pushState({}, null, url.toString());
    if (floor == -1) {
      setTimeout(() => { document.getElementById("downstairs").style.display = "none"; }, 500);
      fadeout(document.getElementById("downstairs"));
    }
    fadepagein();
  }
}

document.addEventListener('mousemove', function (event) {
  bounds = document.getElementById("firstfloor").getBoundingClientRect();
  var left = bounds.left;
  var top = bounds.top;
  var x = event.pageX - left;
  var y = event.pageY - top;
  var cw = document.getElementById("firstfloor").clientWidth;
  var ch = document.getElementById("firstfloor").clientHeight;
  var iw = document.getElementById("firstfloor").naturalWidth;
  var ih = document.getElementById("firstfloor").naturalHeight;
  var px = x / cw * iw;
  var py = y / ch * ih;
  document.body.style.cursor = "default";
  switch (floor) {
    case -1:
      if ((px > 1115 && px < 2730 && py > 800 && py < 1460) || (px > 1850 && px < 2730 && py > 50 && py < 800)) {
        document.body.style.cursor = "pointer";
        if (!caves) {
          load_caves();
        }
      }
      else if (px > 50 && px < 730 && py > 50 && py < 720) {
        document.body.style.cursor = "pointer";
        if (!workshop) {
          load_workshop();
        }
      }
      else if (px > 50 && px < 730 && py > 750 && py < 1130) {
        document.body.style.cursor = "pointer";
        if (!loos) {
          load_loos();
        }
      }
      else {
        if (workshop || caves || loos) {
          clear_all()
        }
      }
      break;
    case 0:
      if ((px > 30 && px < 1100 && py > 1200 && py < 1430) || (px > 770 && px < 1100 && py > 50 && py < 1430) || (px > 1100 && px < 1550 && py > 240 && py < 700)) {
        document.body.style.cursor = "pointer";
        if (!entrance) {
          load_entrance();
        }
      }
      else if (px > 50 && px < 730 && py > 50 && py < 1150) {
        document.body.style.cursor = "pointer";
        if (!library) {
          load_library();
        }
      }
      else {
        if (entrance || library) {
          clear_all()
        }
      }
      break;
    case 1:
      if (px > 250 && px < 1080 && py > 1100 && py < 1720) {
        document.body.style.cursor = "pointer";
        if (!hallway) {
          load_hallway();
        }
      }
      else if (px > 50 && px < 1080 && py > 50 && py < 1050) {
        document.body.style.cursor = "pointer";
        if (!oms) {
          load_oms();
        }
      }
      else if (px > 1115 && px < 2680 && py > 50 && py < 1440) {
        document.body.style.cursor = "pointer";
        if (!drawingstudio) {
          load_drawingstudio();
        }
      }
      else {
        if (oms || hallway || drawingstudio) {
          clear_all()
        }
      }
      break;
    case 2:
      if ((px > 1115 && px < 2680 && py > 50 && py < 700) || (px > 50 && px < 1115 && py > 50 && py < 1050)) {
       document.body.style.cursor = "pointer";
       if (!mezzanine) {
         load_mezzanine();
       }
      }
      else {
        if (mezzanine) {
          clear_all();
        }
      }
  }
});

document.addEventListener('click', function (event) {
  if (caves){
    load_names(0);
  } else if (workshop){
    load_names(1);
  } else if (loos){
    load_names(2);
  } else if (library){
    load_names(3);
  } else if (entrance){
    load_names(4);
  } else if (hallway){
    load_names(5);
  } else if (oms){
    load_names(6);
  } else if (drawingstudio){
    load_names(7);
  } else if (mezzanine){
    load_names(8);
  }
});

function loadpage() {
  fadepagein();
  if (floor < 2) {
    document.getElementById("upstairs").style.display = "block";
    fadein(document.getElementById("upstairs"));
  }
  if (floor > -1) {
    document.getElementById("downstairs").style.display = "block";
    fadein(document.getElementById("downstairs"));
  }
}

function fadepagein() {
  switch (floor) {
    case -1:
      fadein(document.getElementById("basement"));
      fadein(document.getElementById("basement_text"));
      break;
    case 0:
      fadein(document.getElementById("groundfloor"));
      fadein(document.getElementById("groundfloor_text"));
      break;
    case 1:
      fadein(document.getElementById("firstfloor"));
      fadein(document.getElementById("firstfloor_text"));
      break;
    case 2:
      fadein(document.getElementById("secondfloor"));
      fadein(document.getElementById("secondfloor_text"));
  }
}

function clearpage() {
  switch (floor) {
    case -1:
      fadeout(document.getElementById("basement"));
      fadeout(document.getElementById("basement_text"));
      break;
    case 0:
      fadeout(document.getElementById("groundfloor"));
      fadeout(document.getElementById("groundfloor_text"));
      break;
    case 1:
      fadeout(document.getElementById("firstfloor"));
      fadeout(document.getElementById("firstfloor_text"));
      break;
    case 2:
      fadeout(document.getElementById("secondfloor"));
      fadeout(document.getElementById("secondfloor_text"));
  }
}

function clear_all() {
  if (floor < 2) {
    fadein(document.getElementById("upstairs"));
  }
  if (caves) {
    fadeout(document.getElementById("caves"));
    fadeout(document.getElementById("caves_names"));
    caves = false;
  }
  if (loos) {
    fadeout(document.getElementById("loos"));
    fadeout(document.getElementById("loos_names"));
    loos = false;
  }
  if (workshop) {
    fadeout(document.getElementById("workshop"));
    fadeout(document.getElementById("workshop_names"));
    workshop = false;
  }
  if (library) {
    fadeout(document.getElementById("library"));
    fadeout(document.getElementById("library_names"));
    library = false;
  }
  if (entrance) {
    fadeout(document.getElementById("entrance"));
    fadeout(document.getElementById("entrance_names"));
    entrance = false;
  }
  if (oms) {
    fadeout(document.getElementById("oms"));
    fadeout(document.getElementById("oms_names"));
    oms = false;
  }
  if (hallway) {
    fadeout(document.getElementById("hallway"));
    fadeout(document.getElementById("hallway_names"));
    hallway = false;
  }
  if (drawingstudio) {
    fadeout(document.getElementById("drawingstudio"));
    fadeout(document.getElementById("drawingstudio_names"));
    drawingstudio = false;
  }

  if (mezzanine) {
    fadeout(document.getElementById("mezzanine"));
    fadeout(document.getElementById("mezzanine_names"));
    mezzanine = false;
  }
}

function load_names(id) {
  document.getElementById("upstairs").style.display = "none";
  document.getElementById("downstairs").style.display = "none";
  document.getElementById("frame").style.display = "none";
  document.getElementById("names").style.display = "none";
  document.getElementById("back").style.display = "block";
  switch (id) {
    case 0:
      document.getElementById("caves_links").style.display = "block";
      break;
    case 1:
      document.getElementById("workshop_links").style.display = "block";
      break;
    case 2:
      document.getElementById("loos_links").style.display = "block";
      break;
    case 3:
      document.getElementById("library_links").style.display = "block";
      break;
    case 4:
      document.getElementById("entrance_links").style.display = "block";
      break;
    case 5:
      document.getElementById("hallway_links").style.display = "block";
      break;
    case 6:
      document.getElementById("oms_links").style.display = "block";
      break;
    case 7:
      document.getElementById("drawingstudio_links").style.display = "block";
      break;
    case 8:
      document.getElementById("mezzanine_links").style.display = "block";
      break;
  }
}

function back() {
  document.getElementById("frame").style.display = "block";
  document.getElementById("names").style.display = "block";
  document.getElementById("caves_links").style.display = "none";
  document.getElementById("workshop_links").style.display = "none";
  document.getElementById("loos_links").style.display = "none";
  document.getElementById("library_links").style.display = "none";
  document.getElementById("entrance_links").style.display = "none";
  document.getElementById("hallway_links").style.display = "none";
  document.getElementById("oms_links").style.display = "none";
  document.getElementById("drawingstudio_links").style.display = "none";
  document.getElementById("mezzanine_links").style.display = "none";
  loadpage();
  document.getElementById("back").style.display = "none";
  if (floor < 2) {
    document.getElementById("upstairs").style.display = "block";
    fadein(document.getElementById("upstairs"));
  }
  if (floor > -1) {
    document.getElementById("downstairs").style.display = "block";
    fadein(document.getElementById("downstairs"));
  }
}

function load_loos() {
  loos = true;
  fadein(document.getElementById("loos"));
  fadein(document.getElementById("loos_names"));
  if (floor < 2) {
    fadeout(document.getElementById("upstairs"));
  }
  if (caves) {
    fadeout(document.getElementById("caves"));
    fadeout(document.getElementById("caves_names"));
    caves = false;
  }
  if (workshop) {
    fadeout(document.getElementById("workshop"));
    fadeout(document.getElementById("workshop_names"));
    workshop = false;
  }
}

function load_workshop() {
  workshop = true;
  fadein(document.getElementById("workshop"));
  fadein(document.getElementById("workshop_names"));
  if (floor < 2) {
    fadeout(document.getElementById("upstairs"));
  }
  if (caves) {
    fadeout(document.getElementById("caves"));
    fadeout(document.getElementById("caves_names"));
    caves = false;
  }
  if (loos) {
    fadeout(document.getElementById("loos"));
    fadeout(document.getElementById("loos_names"));
    loos = false;
  }
}

function load_caves () {
  caves = true;
  fadein(document.getElementById("caves"));
  fadein(document.getElementById("caves_names"));
  if (floor < 2) {
    fadeout(document.getElementById("upstairs"));
  }
  if (workshop) {
    fadeout(document.getElementById("workshop"));
    fadeout(document.getElementById("workshop_names"));
    workshop = false;
  }
  if (loos) {
    fadeout(document.getElementById("loos"));
    fadeout(document.getElementById("loos_names"));
    loos = false;
  }
}

function load_library() {
  library = true;
  fadein(document.getElementById("library"));
  fadein(document.getElementById("library_names"));
  if (floor < 2) {
    fadeout(document.getElementById("upstairs"));
  }
  if (entrance) {
    fadeout(document.getElementById("entrance"));
    fadeout(document.getElementById("entrance_names"));
    entrance = false;
  }
}

function load_entrance() {
  entrance = true;
  fadein(document.getElementById("entrance"));
  fadein(document.getElementById("entrance_names"));
  if (floor < 2) {
    fadeout(document.getElementById("upstairs"));
  }
  if (library) {
    fadeout(document.getElementById("library"));
    fadeout(document.getElementById("library_names"));
    library = false;
  }
}

function load_oms() {
  oms = true;
  fadein(document.getElementById("oms"));
  fadein(document.getElementById("oms_names"));
  if (floor < 2) {
    fadeout(document.getElementById("upstairs"));
  }
  if (hallway) {
    fadeout(document.getElementById("hallway"));
    fadeout(document.getElementById("hallway_names"));
    hallway = false;
  }
  if (drawingstudio) {
    fadeout(document.getElementById("drawingstudio"));
    fadeout(document.getElementById("drawingstudio_names"));
    drawingstudio = false;
  }
}

function load_hallway() {
  hallway = true;
  fadein(document.getElementById("hallway"));
  fadein(document.getElementById("hallway_names"));
  if (floor < 2) {
    fadeout(document.getElementById("upstairs"));
  }
  if (oms) {
    fadeout(document.getElementById("oms"));
    fadeout(document.getElementById("oms_names"));
    oms = false;
  }
  if (drawingstudio) {
    fadeout(document.getElementById("drawingstudio"));
    fadeout(document.getElementById("drawingstudio_names"));
    drawingstudio = false;
  }
}

function load_drawingstudio () {
  drawingstudio = true;
  fadein(document.getElementById("drawingstudio"));
  fadein(document.getElementById("drawingstudio_names"));
  if (floor < 2) {
    fadeout(document.getElementById("upstairs"));
  }
  if (hallway) {
    fadeout(document.getElementById("hallway"));
    fadeout(document.getElementById("hallway_names"));
    hallway = false;
  }
  if (oms) {
    fadeout(document.getElementById("oms"));
    fadeout(document.getElementById("oms_names"));
    oms = false;
  }
}

function load_mezzanine () {
  mezzanine = true;
  fadein(document.getElementById("mezzanine"));
  fadein(document.getElementById("mezzanine_names"));
  if (floor < 2) {
    fadeout(document.getElementById("upstairs"));
  }
}

function fadein(element) {
  element.style.opacity = 0;
  var tick = function () {
    element.style.opacity = +element.style.opacity + 0.1;
    if (+element.style.opacity < 1) {
      (window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16)
    }
  };
  tick();
}

function fadeout(element) {
  element.style.opacity = 1;
  var tick = function () {
    element.style.opacity = +element.style.opacity - 0.1;
    if (+element.style.opacity > 0) {
      (window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16)
    }
  };
  tick();
}

</script>
</body>
</html>
